<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Doctor Who Episodes Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="toolbar">
    <h1>Doctor Who Episodes Explorer</h1>

    <div class="filters">
      <input id="search" type="search" placeholder="Filter by title, doctor, or companion..." aria-label="Filter episodes" />
      <select id="eraFilter" aria-label="Filter by era" hidden></select>
      <select id="doctorFilter" aria-label="Filter by doctor" hidden></select>
      <select id="companionFilter" aria-label="Filter by companion" hidden></select>
      <button id="exportCsv" type="button" hidden>Export CSV</button>
      <span id="warnBadge" class="badge" aria-live="polite" hidden>Warnings: 0</span>
    </div>

    <div id="loading" role="status" aria-live="polite" class="loading" hidden>Loading episodesâ€¦</div>

    <div id="error" role="alert" class="error" hidden>
      <span id="errorText">Failed to load episode data.</span>
      <details id="errorDetails" hidden><summary>Details</summary><pre id="errorDebug"></pre></details>
      <button id="retry" type="button">Retry</button>
    </div>
  </header>

  <main>
    <div class="tableWrap" tabindex="0" aria-label="Episodes table container">
      <table id="episodesTable">
        <caption>Sortable episode table</caption>
        <thead>
          <tr>
            <th scope="col" aria-sort="none"><button type="button" data-col="rank">Rank</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="title">Title</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="series">Series</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="era">Era</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="year">Broadcast Year</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="director">Director</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="writer">Writer</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="doctor">Doctor</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="companion">Companion</button></th>
            <th scope="col" aria-sort="none"><button type="button" data-col="castCount">Cast Count</button></th>
          </tr>
        </thead>
        <tbody id="tbody" aria-live="polite"></tbody>
      </table>
    </div>

    <nav id="pager" class="pager" hidden aria-label="Pagination">
      <button id="prevPage" type="button">Prev</button>
      <span id="pageInfo"></span>
      <button id="nextPage" type="button">Next</button>
    </nav>
  </main>

  <footer class="foot">
    <small>Tip: Shift+Click headers for multi-column sort. Arrow keys move focus among rows.</small>
  </footer>

  <script src="./script.js" defer></script>
</body>
</html>
